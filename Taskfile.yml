version: '3'

tasks:
  default:
    desc: default (print all ifs)
    cmds:
      - go run main.go
  openlive:
    desc: Run pcap.OpenLive() example
    dir: cmd/openlive
    cmds:
      - go build
      - sudo ./openlive
  openoffline:
    desc: Run pcap.OpenOffline() example
    dir: cmd/openoffline
    cmds:
      - cmd: sudo timeout 3s tcpdump -i eth0 -w example.pcap 'tcp'
        ignore_error: true
      - go build
      - sudo ./openoffline
  fmtvet:
    desc: go fmt and go vet
    cmds:
      - go fmt ./...
      - go vet ./...
      - staticcheck ./...
      - revive ./...
